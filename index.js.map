{"version":3,"file":"index.js","sources":["../src/js/UnsplashAPI.js","../src/js/renderFn.js","../src/js/gallery.js"],"sourcesContent":["import axios from 'axios';\nexport default class UnsplashAPI {\n  #API_KEY = 'gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58';\n  #BASE_URL = 'https://api.unsplash.com/search/photos';\n  #query = '';\n\n  async fetchPopularPhotos(page = 1) {\n    const response = await axios(this.#BASE_URL, {\n      params: {\n        query: 'popular',\n        page,\n        per_page: 12,\n        orientation: 'portrait',\n      },\n      headers: {\n        Authorization: `Client-ID ${this.#API_KEY}`,\n      },\n    });\n\n    return response.data;\n  }\n  async fetchPhotosByQuery(page = 1) {\n    const response = await axios(this.#BASE_URL, {\n      params: {\n        query: this.#query,\n        page,\n        per_page: 12,\n        orientation: 'portrait',\n      },\n      headers: {\n        Authorization: `Client-ID ${this.#API_KEY}`,\n      },\n    });\n\n    return response.data;\n  }\n  set query(newQuery) {\n    this.#query = newQuery;\n  }\n}\n","export default function renderMarkup(data) {\n  return data.reduce(\n    (markup, { alt_description, urls: { small } }) =>\n      markup +\n      `   <li class=\"gallery-item\">\n            <img src=\"${small}\" alt=\"${alt_description}\" class=\"gallery-img\" />\n          </li>\n      `,\n    ''\n  );\n}\n","import Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport UnsplashAPI from './UnsplashAPI';\nimport renderMarkup from './renderFn';\nconst options = {\n  totalItems: 0,\n  itemsPerPage: 12,\n  visiblePages: 5,\n  page: 1,\n};\n\nconst gallery = document.querySelector('.gallery');\nconst container = document.getElementById('pagination');\nconst pagination = new Pagination(container, options);\nconst page = pagination.getCurrentPage();\nconst form = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader');\n\npagination.on('afterMove', getPopular);\n\nconst api = new UnsplashAPI();\n\napi\n  .fetchPopularPhotos(page)\n  .then(res => {\n    gallery.innerHTML = renderMarkup(res.results);\n    pagination.reset(res.total);\n    container.classList.remove('hiden');\n  })\n  .catch(error => {\n    console.log(error);\n    iziToast.error({\n      message: 'Error',\n    });\n  })\n  .finally(() => loader.classList.add('hiden'));\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  const inputValue = event.target.elements.query.value.trim();\n  if (inputValue === '') {\n    iziToast.info({\n      message: 'Sorry, enter that you want to find',\n    });\n    return;\n  }\n  pagination.off('afterMove', getPopular);\n  pagination.off('afterMove', getByQuery);\n  api.query = inputValue;\n\n  loader.classList.remove('hiden');\n\n  api\n    .fetchPhotosByQuery(page)\n    .then(res => {\n      if (res.results.length === 0) {\n        iziToast.info({\n          message: 'Sorry, enter other query',\n        });\n        return;\n      }\n      if (res.total > 12) {\n        container.classList.remove('hiden');\n      } else {\n        container.classList.add('hiden');\n      }\n      gallery.innerHTML = renderMarkup(res.results);\n      pagination.reset(res.total);\n    })\n    .catch(error => {\n      console.log(error);\n      iziToast.error({\n        message: 'Error',\n      });\n    })\n    .finally(() => loader.classList.add('hiden'));\n  pagination.on('afterMove', getByQuery);\n});\n\nfunction getPopular(event) {\n  const currentPage = event.page;\n  api.fetchPopularPhotos(currentPage).then(res => {\n    gallery.innerHTML = renderMarkup(res.results);\n  });\n}\n\nfunction getByQuery(event) {\n  const currentPage = event.page;\n  api.fetchPhotosByQuery(currentPage).then(res => {\n    gallery.innerHTML = renderMarkup(res.results);\n  });\n}\n"],"names":["UnsplashAPI","__privateAdd","_API_KEY","_BASE_URL","_query","page","axios","__privateGet","newQuery","__privateSet","renderMarkup","data","markup","alt_description","small","options","gallery","container","pagination","Pagination","form","loader","getPopular","api","res","error","iziToast","event","inputValue","getByQuery","currentPage"],"mappings":"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"}